{% extends "clubhome.html" %}

{% block content %}
<br><br>
<section id="club-profile" class="club-profile section">
    <div class="container section-title" data-aos="fade-up">
        <h2>Update Club Profile</h2>
    </div>
    
    <div class="container" data-aos="fade-up" data-aos-delay="100">
        <div class="row gy-4 mt-1">
            <div class="col-lg-12">
                <form action="" method="post" enctype="multipart/form-data" class="form" data-aos="fade-up" data-aos-delay="400">
                    {% csrf_token %}
                    <div class="row gy-4">

                        <!-- Club Profile Fields -->
                        <div class="col-md-6">
                            <label for="name">Club Name</label>
                            <input type="text" id="name" name="name" value="{{ data.name }}" 
                                   class="form-control" placeholder="Club Name" required>
                        </div>

                        <div class="col-md-6">
                            <label for="email">Email</label>
                            <input type="email" id="email" name="email" value="{{ data.email }}" 
                                   class="form-control" placeholder="Email" required>
                        </div>

                        <div class="col-md-6">
                            <label for="phone">Phone</label>
                            <input type="tel" id="phone" name="phone" value="{{ data.phone }}" 
                                   class="form-control" placeholder="Phone Number" 
                                   pattern="[6789][0-9]{9}" maxlength="10" required>
                        </div>

                        <div class="col-md-6">
                            <label for="address">Address</label>
                            <input type="text" id="address" name="address" value="{{ data.address }}" 
                                   class="form-control" placeholder="Address" required>
                        </div>

                        <div class="col-md-12">
                            <label for="description">Description</label>
                            <textarea id="description" name="description" rows="4" 
                                      class="form-control" placeholder="Description">{{ data.description }}</textarea>
                        </div>

                        <div class="col-md-12">
                            <label for="password">Password (Leave blank if you don't want to change it)</label>
                            <input type="password" id="password" name="password" 
                                   class="form-control" placeholder="New Password" 
                                   pattern="^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$" 
                                   title="Must contain at least 8 characters, including one letter, one number, and one special character.">
                        </div>

                        <!-- Highlights Upload Section -->
                        <div class="col-md-12">
                            <label for="highlights">Upload Highlight Images</label>
                            <input type="file" id="highlights" name="highlights" 
                                   class="form-control" multiple>
                        </div>

                        <!-- Display Existing Highlights -->
                        <div class="col-md-12 mt-3">
                            <h5>Existing Highlights</h5>
                            <div class="row" style="max-height: 200px; overflow-y: auto; border: 1px solid #ddd; padding: 10px; border-radius: 5px;">
                                {% for highlight in highlights %}
                                    <div class="col-md-3 text-center">
                                        <img src="../static{{ highlight.image.url }}" alt="Highlight Image" 
                                             class="img-thumbnail mb-2" style="height: 150px; width: auto;">
                                    </div>
                                {% empty %}
                                    <p>No highlights uploaded yet.</p>
                                {% endfor %}
                            </div>
                        </div>

                        <div class="col-md-12 text-center">
                            <button type="submit" class="btn btn-primary">Update Profile</button>
                        </div>

                    </div>
                </form>
            </div>
        </div>
    </div>
</section>
{% endblock content %}
